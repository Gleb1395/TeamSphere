{% extends 'base.html' %}
{% block content %}
  <div class="row">
    <div class="col-sm-12">
      <div class="card">
        <div class="card-header d-flex justify-content-between">
          <div class="header-title">
            <h4 class="card-title">User List</h4>
          </div>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <div class="row justify-content-between">
              <div class="col-sm-6 col-md-6">
                <div id="user_list_datatable_info" class="dataTables_filter">
                  <form class="mr-3 position-relative">
                    <div class="form-group mb-0">

                    </div>
                  </form>
                </div>
              </div>
              <div class="col-sm-6 col-md-6">
                <div class="user-list-files d-flex">
                  <h3>
                    <a href="{% url 'worker:worker-create' %}" class="btn-primary">Add new worker</a>
                  </h3>
                </div>
              </div>
            </div>
            <br>
            <table id="user-list-table" class="table table-striped dataTable mt-4" role="grid"
                   aria-describedby="user-list-page-info">
              <thead>
              <tr class="ligth">
                <th>Username</th>
                <th>Name</th>
                <th>Phone number</th>
                <th>Email</th>
                <th>Country</th>
                <th>Status</th>
                <th>Team</th>
                <th>Project</th>
                <th>Join Date</th>
                <th style="min-width: 100px">Action</th>
              </tr>
              </thead>
              <tbody>
              {% for worker in workers %}
                <tr>
                  <td>
                     <a href="{% url 'worker:worker-detail' pk=worker.id %}">
                    {{ worker.username }}
                  </td>
                  <td>{{ worker.first_name }} {{ worker.last_name }}</td>
                  <td>{{ worker.phone_number }}</td>
                  <td>{{ worker.email }}</td>
                  <td>{{ worker.country }}</td>
                  {% for color in status_worker %}
                    {% if color.value == worker.status %}
                      <td><span class="badge bg-{{ color.color }}">{{ worker.get_status_display }}</span></td>
                    {% endif %}
                  {% endfor %}
                  <td>
                    {% for team in worker.team.all %}
                      <ui>
                        <li>
                          {{ team.name }}
                        </li>
                      </ui>
                    {% endfor %}
                  </td>
                  <td>
                    {% for team in worker.team.all %}
                      <ui>
                        <li>
                          {{ team.project.name }}
                        </li>
                      </ui>
                    {% endfor %}
                  </td>
                  <td>{{ worker.date_joined }}</td>
                  <td>
                    <div class="flex align-items-center list-user-action">
                      <a class="btn btn-sm bg-primary" data-toggle="tooltip" data-placement="top" title=""
                         data-original-title="Edit" href="{% url 'worker:worker-update' pk=worker.id %}"><i
                          class="ri-pencil-line mr-0"></i></a>
                      <a class="btn btn-sm bg-primary" data-toggle="tooltip" data-placement="top" title=""
                         data-original-title="Delete" href="{% url 'worker:worker-delete' pk=worker.id %}"><i
                          class="ri-delete-bin-line mr-0"></i></a>
                    </div>
                  </td>
                </tr>
              {% endfor %}

              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
